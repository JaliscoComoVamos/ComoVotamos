---
layout: default
map_page: true
---

<form>
    <input id="mi_distrito_placeholder_2" onchange="getCandidates(); showResults()" type="hidden">
    <input id="mi_municipio_placeholder_2" onchange="getCandidates(); showResults()" type="hidden">
</form>

<div class="row" style="width: 100%; margin:0 auto; margin-bottom: 10px">
        <h2 class='text-center intro'>Ingresa tu dirección o haz clic en el mapa para conocer a las personas que te representarán en los diferentes órdenes de gobierno cuando empiecen las nuevas administraciones.<br></h2>
</div>
<div id='map'></div>
<div class='text-center' id='map-error'
    style='width: 70%; margin:0 auto; font-size: 20px; display: none; background: #F9D333; color: #000000'>
   <br><b>ERROR: ¡No se puede mostrar el mapa! Parece que tu navegador o tu tarjeta gráfica no es compatible con <a href="https://www.khronos.org/webgl/" style="color: #0000FF">WebGL</a>. Descubre cómo arreglarlo <a href="http://get.webgl.org/" style="color: #0000FF">aquí</a>.</b><br>&nbsp;
</div>
<div class="row candidate-list">
    <div class='col-md-10 col-md-offset-1'>
        <div class='text-center' id='no-response-container' style="display:none;">
            <h2 style="color:#EA4233">No se encontraron candidatos(as).</h2>
            <p>No pudimos encontrar ningún candidato o candidata para esa dirección. Verifica que la dirección
            ingresada esté dentro de Jalisco, México e intenta de nuevo.</p>
        </div>
        <div id='response-container' style="display:none;">
            <div style="color:#3F626B; font-size: 18px;">
                <p class='text-center'><br><b>Esta ubicación pertenece al Distrito Electoral Federal y Local de Jalisco número <span id="mi_distrito_placeholder">__</span> y el municipio de
                <span id="mi_municipio_placeholder">__</span>.<br><br></b></p>
            </div>
            <div class='row filter_level' style='width: 86%; margin:0 auto;'>
                <p class='text-center' style="font-size: 19px; color: #555"><b>Mostrar candidatos o candidatas a:</b><br>
                <label><input checked="checked" id="show_alcalde_results" onchange="showResults()" type="checkbox" value="alcalde">
                Alcalde</label>
                <label><input checked="checked" id="show_dl_results" onchange="showResults()"
                type="checkbox" value="dl"> Diputado Local</label>
                <label><input checked="checked" id=
                "show_gobernador_results" onchange="showResults()" type="checkbox" value="gobernador">
                Gobernador</label>
                <label><input checked="checked" id=
                "show_df_results" onchange="showResults()" type="checkbox" value="df"> Diputado Federal</label>
               <label><input checked="checked" id="show_senador_results" onchange="showResults()" type=
                "checkbox" value="senador"> Senador</label>
                <label><input checked="checked" id="show_presidente_results" onchange=
                "showResults()" type="checkbox" value="presidente"> Presidente</label><br></p>
            </div>
            <div style='width: 95%; margin:0 auto;'>
                <p class="lead2 text-center" id='results-nav' style="color:#3d626b;">
                <br><b>Candidaturas locales: &nbsp;</b>
                <span id='alcalde-nav' style="display:none;"> <a href="#alcalde-global-container" id=
                "alcalde-name-nav">Presidencia Municipal</a> &nbsp;&nbsp;&nbsp;&nbsp;|</span>
                <span id=
                'dl-nav'><a href="#dl-name" id="dl-name-nav">Diputación Local</a>
                &nbsp;&nbsp;&nbsp;&nbsp;|</span>
             <span id='gobernador-nav'><a href="#gobernador-name" id="gobernador-name-nav">Gobernador de
                Jalisco</a></span><br>
                <b>Candidaturas federales: &nbsp;</b>
                <span id='df-nav'> <a href="#df-name" id="df-name-nav">Diputación Federal</a> &nbsp;&nbsp;&nbsp;&nbsp;|</span>
              <span id='senador-nav'><a href="#senador-name" id=
                "senador-name-nav">Senaduría</a> &nbsp;&nbsp;&nbsp;&nbsp;|</span>
                <span id='presidente-nav'><a href="#presidente-name"
                id="presidente-name-nav">Presidencia de la República</a></span></p>
            </div>

            <div id='alcalde-global-container'>
                <div class='text-center' id='alcalde-container-not-found' style='display: none;'><br>
                    <h3 class='text-center' id="alcalde-name-not-found">Presidencia Municipal</h3>
                    <p><b>No encontramos ningún candidato o candidata a presidente municipal para esta ubicación.</b> </p>
                    <p style="text-align: left" class="small">
                        Actualmente tenemos la lista completa de candidatos y candidatas a presidente municipal en Acatlán de Juárez, Ameca, Autlán de Navarro, Ayotlán, Colotlán, El Grullo, El Salto, Guadalajara, Ixtlahuacán de los Membrillos, Juanacatlán, Lagos de Moreno, Mascota, Puerto Vallarta, Tamazula de Gordiano, Tepatitlán de Moreno, Tlajomulco de Zúñiga, Tlaquepaque, Tonalá, Zapopan, Zapotlán el Grande, Zapotlanejo.</p> <p class="small" style="text-align: left">Si deseas que agreguemos información para otro municipio, <a href="{{ '/contacto' | relative_url }}">envíanos una solicitud</a> y haremos todo lo posible para actualizar nuestra base de datos. Igual, si tu dirección pertenece a uno de los municipios mencionados, nos ayudaría si <a href="{{ '/contacto' | relative_url }}">nos avisaras del error</a> para arreglarlo. ¡Gracias!</p>
                </div>
                <div id='alcalde-container'>
                    <h3 class='text-center' id="alcalde-name">Presidencia Municipal de <span id="mi_municipio_placeholder_3">__</span></h3>
                    <table class="table table-striped table-responsive" id="alcalde-results">
                        <thead>
                            <tr>
                                <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                                <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                                <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                                <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class='text-center'>
                        <a href="{{ '/informacion#alcalde' | relative_url }}">Conoce las funciones de un presidente municipal.</a><br>
                    <!--    <a href="http://jaliscocomovamos.org/ofertodromo/presidentes-municipales" target="_blank">Consulta las promesas de campaña de las y los candidatos a presidentes municipales.</a>-->
                    </div>
                </div>
            </div>
            <div class='text-center' id='dl-container-not-found' style='display: none;'>
                <div class='text-center' id="dl-name-not-found"></div>
                <p>No pudimos encontrar ningún candidato o candidata para esa dirección.</p>
            </div>
            <div id='dl-container'>
                <br>
                <h3 class='text-center' id="dl-name">Diputación Local del Distrito <span id="dl_placeholder_1">__</span></h3>
                <table class="table table-striped table-responsive" id="dl-results">
                    <thead>
                        <tr>
                            <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                                <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                            <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class='text-center'>
                    <a href="{{ '/informacion#diputado-local' | relative_url }}">Conoce las funciones de un diputado local.</a><br>
                  <!--  <a href="http://jaliscocomovamos.org/ofertodromo/diputado-local" target="_blank">Consulta las promesas de campaña de las y los candidatos a diputados locales.</a>-->
                </div>
            </div>
            <div class='text-center' id='gobernador-container-not-found' style='display: none;'>
                <div class='text-center' id="gobernador-name-not-found"></div>
                <p>No pudimos encontrar ningún candidato o candidata para esa dirección.</p>
            </div>
            <div id='gobernador-container'>
                <br>
                <h3 class='text-center' id="gobernador-name">Gobernador de Jalisco</h3>
                <table class="table table-striped table-responsive" id="gobernador-results">
                    <thead>
                        <tr>
                            <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                                <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                            <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class='text-center'>
                    <a href="{{ '/informacion#gobernador' | relative_url }}">Conoce las funciones del gobernador de Jalisco.</a><br>
                    <a href="http://jaliscocomovamos.org/ofertodromo/gobernador" target="_blank">Consulta las promesas de campaña de las y los candidatos a gobernador.</a>
                </div>
            </div>
            <div class='text-center' id='df-container-not-found' style='display: none;'>
                <div class='text-center' id="df-name-not-found"></div>
                <p>No pudimos encontrar ningún candidato o candidata para esa dirección.</p>
            </div>
            <div id='df-container'>
                <br>
                <h3 class='text-center' id="df-name">Diputación Federal del Distrito <span id="df_placeholder_1">__</span> de Jalisco</h3>
                <table class="table table-striped table-responsive" id="df-results">
                    <thead>
                        <tr>
                            <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                            <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class='text-center'>
                    <a href="{{ '/informacion#diputado-federal' | relative_url }}">Conoce las funciones de un diputado federal.</a><br>
                  <!--  <a href="http://jaliscocomovamos.org/ofertodromo/diputado-federal" target="_blank">Consulta las promesas de campaña de las y los candidatos a diputados federales.</a>-->
                </div>
            </div>
            <div class='text-center' id='senador-container-not-found' style='display: none;'>
                <div class='text-center' id="senador-name-not-found"></div>
                <p>No pudimos encontrar ningún candidato o candidata para esa dirección.</p>
            </div>
            <div id='senador-container'>
                <br>
                <h3 class='text-center' id="senador-name">Senaduría de la República por el Estado de Jalisco</h3>
                <table class="table table-striped table-responsive" id="senador-results">
                    <thead>
                        <tr>
                            <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                            <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class='text-center'>
                    <a href="{{ '/informacion#senador' | relative_url }}">Conoce las funciones de un senador.</a><br>
                    <a href="http://jaliscocomovamos.org/ofertodromo/senador" target="_blank">Consulta las promesas de campaña de las y los candidatos a senadores.</a>
                </div>
            </div><br>
            <div id='presidente-container'>
                <h3 class='text-center' id='presidente-name'>Presidencia de la República</h3>
                <table class="table table-striped table-responsive" id="presidente-results">
                    <thead>
                        <tr>
                            <th><i class='fa fa-user' title="icon persona"></i> Candidato(a)</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Partido</th>
                            <th><img src="fonts/external-link.svg" alt="external-link" style="width: 15px"> Enlaces</th>
                            <th><i class='fa fa-certificate' title="icon partido"></i> Antecedentes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class='text-center'>
                    <a href="{{ '/informacion#presidente' | relative_url }}">Conoce las funciones del presidente de la república.</a><br>
                    <a href="http://jaliscocomovamos.org/ofertodromo/presidente" target="_blank">Consulta las promesas de campaña de las y los candidatos a presidente.</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    <p><br></p>
</div>
<hr>

<div class='row'>
    <div class='col-md-5 col-md-offset-2' style="margin-bottom:30%;">
        <br>
        <h2>Acerca de</h2>
        <div class='about'>
            <p><span style="font-weight: bold; font-style: italic;">Jalisco Cómo Votamos</span>&nbsp; es un proyecto del observatorio ciudadano <a href="http://jaliscocomovamos.org" target="_blank">Jalisco Cómo Vamos</a>. En este proceso electoral 2024 buscamos otorgar información de utilidad antes de la jornada de votación del día 2 de junio. Con esta herramienta podrás conocer a las y los candidatos que se encontrarían en tu boleta, basado en tu dirección de credencial para votar. </p>
            <p>Actualmente están disponibles las y los candidatos a todos los distritos locales y federales, municipios de la Zona Metropolitana de Guadalajara y cada cabecera de región. Si deseas incluir algún municipio, <a target="_blank" href="https://jaliscocomovamos.org/contactanos">contáctanos</a></p>


<p><span style="font-weight: bold; font-style: italic;">Jalisco Cómo Votamos</span>&nbsp; es una de las dos plataformas que Jalisco Cómo Vamos impulsa en este proceso electoral 2024 y que pone al servicio de la comunidad. La segunda plataforma,  <a href="http://encuestascomovamos.org" target="_blank">Encuestas Cómo Vamos</a>, recopila las encuestas difundidas antes de las elecciones en el estado.</p>


            <p>Después de la elección, aquí también podrás consultar <!--<a href="{{ '/resultados#ver' | relative_url }}">-->los resultados<!--</a>--> de las elecciones.</p>

            <p style="font-size: 18px"><a href="{{ '/informacion' | relative_url }}">Más información
            sobre este proyecto y el proceso electoral &raquo;</a></p><br>

        </div>
    </div><br><br>
    <div class='col-md-3 hidden-xs hidden-sm'><img alt='Jalisco' src="{{ '/images/jalisco.png' | relative_url }}" style='height: 300px; width: 329px;' title='Jalisco'></div>
</div><br>
<div><br>
<br>&nbsp;<br/>&nbsp;<br/>
<br></div>


<script>
// Reload to top of page
window.onload=function() {
  setTimeout(function() {
    window.scrollTo(0, 0);
  }, 0);
};

// List municipios
var all_municipios = [];
$.getJSON("data/lista_municipios.json", function(data) {
        for (i = 0; i < data.length; i++) {
            all_municipios.push(data[i].Name)
        };
});

$(function() {
      results_level = ['alclade', 'dl', 'df', 'senador', 'gobernador', 'presidente'];

      // set levels of government checkboxes
      if (results_level.indexOf("alcalde") >= 0)
        $('#show_alcalde_results').prop('checked', true);
      if (results_level.indexOf("dl")  >= 0)
        $('#show_dl_results').prop('checked', true);
      if (results_level.indexOf("df")  >= 0)
        $('#show_df_results').prop('checked', true);
      if (results_level.indexOf("senador")  >= 0)
        $('#show_senador_results').prop('checked', true);
      if (results_level.indexOf("gobernador")  >= 0)
        $('#show_gobernador_results').prop('checked', true);
      if (results_level.indexOf("presidente")  >= 0)
        $('#show_presidente_results').prop('checked', true);

      $("#results-nav a").click(function(e) {
        e.preventDefault();
        var scroll_to = $($("#" + e.target.id).attr('href'));
        $('html, body').animate({
            scrollTop: scroll_to.offset().top
        }, 1000);
      });

    $('#mi_distrito_placeholder_2').on('DOMSubtreeModified', function(e){
        e.preventDefault();
        $('html, body').animate({
                scrollTop: $("#map").offset().top
            }, 1000);
    });

});




// Check that WebGL was able to load, if not, throw error
try {
    mapboxgl.accessToken = 'pk.eyJ1IjoiZnJqY3YiLCJhIjoiY2x3OGFoZXVvMmdnYzJrdGlidDdvbXI1ayJ9.Ajca1U6dApprnYpcamgJyA;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/frjcv/clw8i9bon00nu01oxc3f834uf',
        center: [-103.346497, 20.676242], // starting position
        zoom: 7,
    });
} catch(err) {
        $('#map').hide();
        $('#map-error').show();
}

var colors = ["#911eb4", "#46f0f0", "#f032e6", "#d2f53c", "#fabebe",
"#008080", "#e6beff", "#aa6e28", "#000080", "#800000",
"#aaffc3", "#808000", "#ffd8b1", "#3cb44b", "#808080",
"#e6194b", "#fffac8", "#ffe119", "#0082c8", "#f58231",];

// create an empty array to keep track of popups
var popups = [];

map.on('load', function() {
    d3.json('archivos_mapa/Municipios.geojson', function(data) {
        let geocoder2 = new MapboxGeocoder({
            accessToken: mapboxgl.accessToken,
            countries: 'mx',
            language: 'es',
            placeholder: 'Buscar',
            limit: 6,
            mapboxgl: mapboxgl
        });
        map.addControl(geocoder2);
        map.addControl(new mapboxgl.NavigationControl());
        geocoder2.on('result', function(res) {
            $('#no-response-container').hide();
            $("#response-container").show();
            if (popups.length > 0) {
                //remove all the popups from the map if they already exist
                popups.forEach(function(popup) {
                    popup.remove();
                });
            }
            // put lat / lon into a turf point (just for a shorter variable name)
            let pt = turf.point(res.result.geometry.coordinates);
            // iterate through multipolygons to see which one point is inside
            data.features.forEach(function(feature) {
                // turf.inside is a method to check whether a point is inside a polygon
                if (turf.inside(pt, feature)) {
                    if (/\d/.test(feature.properties.Name.slice())) {
                        mi_distrito = feature.properties.Name.slice().replace(/\D/g, '')
                    } else {
                        mi_municipio = feature.properties.Name.slice()
                    }
                }
            });
            searchedPopup = new mapboxgl.Popup().setLngLat(pt.geometry.coordinates).setHTML("<br>" +
                    mi_municipio + "<br>Distrito " + mi_distrito).addTo(map);
            popups.push(searchedPopup);
            document.getElementById("mi_distrito_placeholder").innerHTML = mi_distrito;
            document.getElementById("mi_distrito_placeholder_2").innerHTML = mi_distrito;
            document.getElementById("dl_placeholder_1").innerHTML = mi_distrito;
            document.getElementById("df_placeholder_1").innerHTML = mi_distrito;
            document.getElementById("mi_municipio_placeholder").innerHTML = mi_municipio;
            document.getElementById("mi_municipio_placeholder_2").innerHTML = mi_municipio;
            document.getElementById("mi_municipio_placeholder_3").innerHTML = mi_municipio;
            getCandidates();
            map.flyTo({
                center: pt.geometry.coordinates,
                zoom: 13.5,
                speed: 10
            });
        });
        map.addSource('jalisco', {
            type: 'geojson',
            data: data
        });
        map.addLayer({
            'id': 'jalisco',
            'type': 'fill',
            'source': 'jalisco',
            'paint': {
                'fill-opacity': 0
            }
        });
    });
    d3.json('archivos_mapa/Municipios.geojson', function(data2) {
        data2.features.forEach((distrito, index) => {
            map.addSource(distrito.properties.Name, {
                type: 'geojson',
                data: distrito
            });
            // just add this layer for the colors
            map.addLayer({
                'id': distrito.properties.Name,
                'type': 'fill',
                'source': distrito.properties.Name,
                'paint': {
                    'fill-color': colors[index],
                    'fill-opacity': 0.35
                }
            });
        })
    })
})

map.on('click', 'jalisco', function (e) {
    clickedPopup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML("<br>" + e.features.map(function(feature) { return feature.properties.Name; }).join('<br>'))
        .addTo(map);
    if (popups.length > 0) {
        //remove all the popups from the map if they already exist
        popups.forEach(function(popup) {
            popup.remove();
        });
    }
    popups.push(clickedPopup);
    mi_distrito = e.features.map(function(feature) { return feature.properties.Name; })[1].slice().replace(/\D/g, '');
    mi_municipio = e.features.map(function(feature) { return feature.properties.Name; })[0].slice();
    document.getElementById("mi_distrito_placeholder").innerHTML = mi_distrito;
    document.getElementById("mi_distrito_placeholder_2").innerHTML = mi_distrito;
    document.getElementById("dl_placeholder_1").innerHTML = mi_distrito;
    document.getElementById("df_placeholder_1").innerHTML = mi_distrito;
    document.getElementById("mi_municipio_placeholder").innerHTML = mi_municipio;
    document.getElementById("mi_municipio_placeholder_2").innerHTML = mi_municipio;
    document.getElementById("mi_municipio_placeholder_3").innerHTML = mi_municipio;
    $('#no-response-container').hide();
    $("#response-container").show();
    getCandidates();
});

map.on('mouseenter', 'jalisco', function() {
    // Change the cursor style as a UI indicator.
    map.getCanvas().style.cursor = 'pointer';
})
map.on('mouseleave', 'jalisco', function() {
    // Change the cursor style back as a UI indicator.
    map.getCanvas().style.cursor = '';
});


</script>
